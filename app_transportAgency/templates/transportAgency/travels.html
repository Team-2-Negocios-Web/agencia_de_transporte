{% extends "base.html" %}
{% load static %}
{% block title %}Programacion de Viajes{% endblock %}
{% block css %}
<link href="{% static 'transportAgency/css/card.css' %}" rel="stylesheet">
{% endblock %}


{% block container %}

<div>
    <h1>Programacion de Viajes</h1>
    <div class="container">
        <div class="row">

            <!--Creacion de cajas-->
            {% for t in travels  %}
                <div class="col-lg-4">
                    <div class="card card-margin">
                        <div class="card-header no-border">
                            {% if t.state == "1" %}
                                <h5 class="card-title-success">{{t.get_state_display}}</h5>
                            {% elif t.state == "2" %}
                                    <h5 class="card-title-warning">{{t.get_state_display}}</h5>
                            {% else %}
                                    <h5 class="card-title-danger">{{t.get_state_display}}</h5>
                            {% endif %}  
                        </div>
                        <div class="card-body pt-0">
                            <div class="widget-49">
                                <div class="widget-49-title-wrapper">
                                    <div class="widget-49-date-success">
                                        <span class="widget-49-date-day">{{t.routes.precio}}</span>
                                        <span class="widget-49-date-month">Lps</span>
                                    </div>
                                    <div class="widget-49-meeting-info">
                                        <span class="widget-49-pro-title">{{t.date_trip}}</span>
                                        <span class="widget-49-meeting-time">Tiempo aprox: {{t.routes.route_time}} horas</span>
                                    </div>
                                </div>
                                <ol class="widget-49-meeting-points">
                                    <li class="widget-49-meeting-item"><span>Origen: {{t.routes.origin}}</span></li>
                                    <li class="widget-49-meeting-item"><span>Destino: {{t.routes.destiny}}</span></li>
                                    <li class="widget-49-meeting-item"><span>Horario: {{t.routes.schedule}}</span></li>
                                </ol>
                                <div class="widget-49-meeting-action">
                                     {% if t.state == "1" %}
                                        <a href="#" class="btn btn-sm btn-buy">Comprar</a>
                                        {% if request.user.is_superuser %}
                                        <a href="#" class="btn btn-sm btn-cancelar">Cancelar</a>   
                                        {% endif %}       
                                    {% elif t.state == "2" %}
                                        <a href="#" class="btn btn-sm btn-nobuy">No disponible</a>
                                    {% else %}
                                        <a href="#" class="btn btn-sm btn-nobuy">No disponible</a>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>       
            {% endfor %}
        </div>   
        
        {% block js %}
        <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.bundle.min.js"></script>
        {% endblock %}
                 
</div>

{% endblock %}